<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: Assignment2_Exp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Assignment2_Exp </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The aim of this project is to implement an architecture that simulates the behavior of a pet interacting with a ball moved by a human. The ball and the pet move in a 8x8 environment. Depending on the interaction with the ball, the pet can be in 3 different states: normal, sleep, play. The normal state has as possible transitions both the sleep and the play state; instead, both sleep and play can only return to the normal state.</p>
<p>The architecture is composed by 5 nodes: send_pose, move_client, <a class="el" href="namespacego__to__point__ball.html">go_to_point_ball</a>, <a class="el" href="namespacego__to__point__action.html">go_to_point_action</a>, <a class="el" href="namespacestate__machine.html">state_machine</a>. Its logic and the interaction between the nodes can be divided into 2. On one hand we have the nodes regarding the motion of the ball: move_client and <a class="el" href="namespacego__to__point__ball.html">go_to_point_ball</a>. Inside these 2 nodes are implemented an action client and an action server respectively. The action client simply send some positions(i set the positions manually in order to possibly see the robot going through all the state in a short time), while the server move the robot in order to reach those positions. The other 3 nodes handle the motion of the robot. The nodes send_pose and <a class="el" href="namespacego__to__point__action.html">go_to_point_action</a> are similar to the two described above. The action client send_pose receives positions from the state machine and send them to the action server <a class="el" href="namespacego__to__point__action.html">go_to_point_action</a> that moves the robot. The <a class="el" href="namespacestate__machine.html">state_machine</a> can be considered the main node, the one that handle all the transitions of the robot between the 3 states. In the normal behavior, random positions are sent to the node send_pose until the robot sees the ball(transition to the play state) or a certain time has passed( transition to the sleep state). In the sleep state a predefined position is sent to the send_pose node and the robot stays there for a certain time. After that it goes back to normal behavior. In the play state, the robot keeps tracking the ball. When the ball stops, the robot turns the head, and after that it starts tracking the ball again. This behaviour is repeated until the robot is unable to find the ball for some time, and therefore it goes back to normal behaviour. The 4 action nodes exchange messages of type Planning.action, while the other nodes exchange messages of type Num.msg.</p>
<p>In the repository different folders are present: 1)action and msg contain the types of messages just mentioned. 2)scripts and src contain the nodes explained above. 3)config contains a file for the configuration of the robot's motors. 4)urdf contains different files regarding the definition of the ball and the robot 5)launch contains a launch file to display everything.</p>
<p>To run the simulation only launching the launch file is needed. When the simulation is launched, we can see from the terminal all the transitions between states displayed by the <a class="el" href="namespacestate__machine.html">state_machine</a> node.</p>
<p>The system has proved to be robust when stressed with randomness. To syncronize the <a class="el" href="namespacestate__machine.html">state_machine</a> node with the current behaviour of the robot, the <a class="el" href="namespacestate__machine.html">state_machine</a> stops everytime it sends a target position to the action client node, and will not go on with the execution until is notified that the just sent position has been reached by the robot. This avoid any kind of possible overlapping of commands that can lead to some weird behaviour of the robot. A consequence of this implementation can be observed when the robot is reaching a position(normal state) and in the meanwhile it sees the ball:it will not start tracking the ball(and enter in the play state) until it has reached the position.</p>
<p>I ran into a problem during the testing of the code. The action server(go_to_point_action) works properly(is pretty fast) when the connection with the action client remains active(hence, when the node state_machine sends positions sequentially). Instead, when the action client(send_pose) is not called for a certain time (for example during the play state) it always takes a couple of seconds before the action server can receive positions again and move the robot. This behaviour can be clearly noticed when the robot moves from the play to the normal state(looking at the terminal): when it enters the normal state a new target position is immediately sent to the action client, but the robot keeps rotating for some seconds before start reaching it. To make this behaviour even more clear, I displayed on the terminal an error message(just to make it more visible) everytime the action server actually receive the position sent by the client(in order to observe the delay). Even if this behaviour doesn't cause any loss of data, it anyway delay the execution. I couldn't find anything in the structure of the code that could explain this delay, but solving it could be an important improvement to the system.</p>
<p>Author: Cristina Naso Rappis email:<a href="#" onclick="location.href='mai'+'lto:'+'cri'+'.t'+'enn'+'is'+'97@'+'gm'+'ail'+'.c'+'om'; return false;">cri.t<span style="display: none;">.nosp@m.</span>enni<span style="display: none;">.nosp@m.</span>s97@g<span style="display: none;">.nosp@m.</span>mail<span style="display: none;">.nosp@m.</span>.com</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.0
</small></address>
</body>
</html>
